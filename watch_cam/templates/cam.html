{% extends "base.html" %}
{% block title %}{{app_title}}{% endblock %}
{% block head %}
  {{ super() }}
  <script>
    function removeLoadingText(){
      const text = document.getElementById("loading");
      text.remove()
    }
    function playSound(toPlay){
      const file = toPlay.getAttribute("data-file");
      let req = fetch(`/play/${file}`, {
        method: "POST"
      })
      console.log(req)
      req.then(res => console.log(res))
    }
  </script>
{% endblock %}
{% block content %}
  <h1>{{ app_title }}</h1>
  <img id="live-stream"  onload="removeLoadingText()" src="{{ url_for(stream_url) }}" style="display: block; margin-left: auto; margin-right: auto; width: 60%; height: 90%;">
  <p id="loading">Starting Camera ...</p>
  {% if audio_files %}
  <div style="display: flex; flex-direction: column;">
    <h2>Sounds To Play:</h2>
    <div style="flex-direction: row">
    {% for file in audio_files%}
      <button id="file" onclick="playSound(this)" data-file="{{file}}">{{file}}</button>
    {% endfor %}
    </div>
  </div>
  {% endif %}
{% endblock %}